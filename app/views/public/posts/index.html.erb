<h1>投稿一覧</h1>

<!--検索フォーム-->
<% if user_signed_in? %>
  <div>
    <%= form_with url: search_path, method: :get, local: true do |f| %>
      <%= f.hidden_field :model, :value => "Post" %>
      <%= f.text_field :content %>
      <%= f.select :search_column, options_for_select({ "店舗名" => "shop_name", "住所" => "address", "投稿文" => "posting_text"}) %>
      <%= f.submit "検索" %>
    <% end %>
  </div>
<% end %>


<!--投稿一覧-->
<% @posts.each do |post| %>
  <% if post.post_image.present? %>
    <div>
      <%= link_to post_path(post.id) do %>
        <span><%= image_tag post.user.get_icon_image(100,100) %></span>
        <span><%= post.user.user_name %></span>
        <span><%= post.shop_genre_i18n %></span>
        <span><%= post.shop_name %></span>
        <span><%= post.address %></span>
        <span><%= image_tag post.post_image, size: "200×200" %></span>
        <span><%= post.posting_text %></span>
      <% end %>
    </div>
  <% else %>
    <div>
      <%= link_to post_path(post.id) do %>
        <span><%= image_tag post.user.get_icon_image(100,100) %></span>
        <span><%= post.user.user_name %></span>
        <span><%= post.shop_genre_i18n %></span>
        <span><%= post.shop_name %></span>
        <span><%= post.address %></span>
        <span><%= post.posting_text %></span>
      <% end %>
    </div>
    
  <% end %>
<% end %>
